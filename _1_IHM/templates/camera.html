<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Camera</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style_camera.css')}}"> <!-- Load css file-->
    <link rel="shortcut icon" href="#" /> <!--No favicon-->

</head>

<body>
   <!-- Tabs Title -->
    <ul class="tabs">
        <li class="tab" id="tab1" onclick="openTab('tab1')">Prendre une photo</li>
        <li class="tab" id="tab2" onclick="openTab('tab2')">Vue de la caméra</li>
        <li class="tab" id="tab3" onclick="openTab('tab3')">Gallerie des photos</li>
    </ul>

    <!-- Tabs Content 1-->
    <div id="tab1_content" class="tab-content">
        <h2>Prendre une photo</h2>
        <div class="photo_taken"></div>
        <div class="photo_options">
            <form action="{{ url_for('camera') }}" method="post" id="photoForm">
                <ul>
                    <li>
                        <label for="photo_name">Renomer&nbsp;la&nbsp;photo&nbsp;:</label>
                        <input type="text" id="photo_name" name="photo_name" maxlength="30" />
                        <label class="extension" for="photo_name">.jpg&nbsp;</label>
                    </li>
                    <li>
                        <label for="photo_name_suffixe">Ajouter&nbsp;"_via_ihm"&nbsp;:</label>
                        <input type="checkbox" id="photo_name_suffixe" name="photo_name_suffixe"
                        checked/>
                    </li>
                    <li>
                        <label for="photo_tms">Timeout&nbsp;(ms)&nbsp;:</label>
                        <input type="number" id="photo_tms" name="photo_tms" value="500"
                        min="0" max="9999" step="100" />
                    </li>
                    <li>
                        <label for="photo_quality">Qualité&nbsp;(%)&nbsp;:</label>
                        <input type="number" id="photo_quality" name="photo_quality"
                        min="1" max="100" value="50"/>
                    </li>
                </ul>
                <div class="button_photo">
                    <button type="button" onclick="submitPhotoForm()">Prendre une photo</button>
                </div>
            </form>
        </div>
        <div id="resultMessage"><p id="resultMessageParagraph"></p></div>
    </div>





    <!-- Tabs Content 2-->
    <div id="tab2_content" class="tab-content">
        <h2>Vue de la caméra</h2>
        <div class="video_stream_container">
            <img id="video-stream" src="">
        </div>       
    </div>




    <!-- Tabs Content 3-->
    <div id="tab3_content" class="tab-content">
        <h2>Gallerie des photos</h2>
        <p>Répertoire : {{media_path}}</p>
        <div class="items-container">
            <table>
                <tr>
                    <td>Nom</td>
                    <td>Taille</td>
                    <td>Heure</td>
                    <td>Date</td>
                </tr>
                {% for i in range(0,4) %}
                {% for photo in list_photos %}
                    <tr class="item-photo" id="photo{{loop.index0}}" onclick='showPhotoModal("{{loop.index0}}")'>
                        <td>{{photo["name"]}}</td>
                        <td>{{photo["size"]}} {{photo["size_unit"]}}</td>
                        <td>{{photo["hour"]}}</td>
                        <td>{{photo["date"]}}</td>
                    </tr>
                {% endfor %}
                {% endfor %}
            </table>
        </div>

        <div class="modal" id="photo_modal">
            <span class="close_modal" onclick="closeModal()">&times;</span>
            <img id="img_modal" src="">
            <div id="caption_modal"></div>
        </div>
    </div>


<!-- Scripts declarations -->
<script src="/static/js/jquery-3.6.4.min.js"></script> <!--Load JQuery library-->

<script>
    //Declare ALL python variables so that Jinja2 can render them for JavaScipt to use
    var video_stream_link = "{{url_for('videoStream')}}";
    var list_photos = JSON.parse('{{list_photos | tojson | safe}}'); //convert python variables to json
    var media_path = JSON.parse('{{media_path | tojson | safe}}');
    var photo_modal_link = "{{url_for('getPhotoModal', filename='')}}";
</script>
<script type=text/JavaScript src="/static/js/camera-route.js"></script> <!--Load script for this route -->

</body>    



</html>

